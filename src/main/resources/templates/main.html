<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset=utf-8>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>메인 페이지</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css"/>
    <link rel="stylesheet" type="text/css" href="css/bootstrap-responsive.css"/>
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
    <link rel="stylesheet" type="text/css" href="css/pluton.css"/>
    <link rel="stylesheet" type="text/css" href="css/pluton-ie7.css"/>
    <link rel="stylesheet" type="text/css" href="css/jquery.cslider.css"/>
    <link rel="stylesheet" type="text/css" href="css/jquery.bxslider.css"/>
    <link rel="stylesheet" type="text/css" href="css/animate.css"/>
    <link rel="icon" href="/assets/img/logo.png" type="image/x-icon">
    <link rel="shortcut icon" href="/assets/img/logo.png" type="image/x-icon">

    <style>
        .thumbnail {
            border: 2px solid #191a1c;
        }

        .thumbnail h3 {
            margin: 5px 0;
            word-wrap: break-word;
            max-height: 4.4em;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            line-height: 1.5;
        }

        .profile-menu {
            position: relative;
        }

        .profile-sub-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            z-index: 1000;
        }

        .profile-menu:hover .profile-sub-menu {
            display: block;
        }

        #div1 {
            background-image: url("/assets/img/1.jpg");
            background-size: cover; /* 배경 이미지를 화면 전체에 맞춥니다. */
            background-repeat: no-repeat; /* 배경 이미지 반복 제거 */
        }

        #div2 {
            background-image: url("/assets/img/2.jpg");
            background-size: cover; /* 배경 이미지를 화면 전체에 맞춥니다. */
            background-repeat: no-repeat; /* 배경 이미지 반복 제거 */
        }

        #div3 {
            background-image: url("/assets/img/3.jpg");
            background-size: cover; /* 배경 이미지를 화면 전체에 맞춥니다. */
            background-repeat: no-repeat; /* 배경 이미지 반복 제거 */
        }
    </style>
<body>
<div class="navbar">
    <div class="navbar-inner">
        <div class="container">
            <a href="/main" class="brand">
                <img src="/assets/img/logo3.png" width="170" height="41" alt="Logo">
            </a>

            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <img src="/assets/img/logo5.png" width="30" height="30" alt="Logo">
            </button>

            <div class="nav-collapse collapse pull-right">
                <ul class="nav" id="top-navigation">
                    <li><a style="border: 1px solid #15c6e5;" href="/main">메인 페이지</a></li>
                    <li><a href="/event/eventList">문화행사 찾기</a></li>
                    <li><a href="/redirect9">문화시설 찾기</a></li>
                    <li><a href="/notice/noticeListUsingQueryDSL">커뮤니티</a></li>
                    <li class="dropdown">
                        <a href="" class="dropdown-toggle" data-toggle="dropdown" style="background-color:#5395a9;"><span class="username-color">[[${userName}]]</span>님의 마이페이지<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="/redirect3">프로필 카드</a></li>
                            <li><a href="/user/changeUserName">닉네임 변경</a></li>
                            <li><a href="#" id="logoutLink">로그아웃</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div id="home">
    <div id="da-slider" class="da-slider">
        <div class="triangle"></div>

        <div class="mask"></div>

        <div class="container">

            <div class="da-slide">
                <h2 class="fittext2">서비스 소개</h2>
                <h4>거북목 진단</h4>
                <p>거북목 진단 서비스는 사용자의 자세를 분석하여<br>귀와 어깨 사이의 거리를 계산해 거북목의 정도를 등급으로 제공합니다.<br>
                    지속적인 진단을 통해 사용자가 자신의 거북목 개선 정도를<br>알 수 있도록 도와줍니다.</p>
                <a href="/redirect6" class="da-link button">이동하기</a>
                <div class="da-img">
                    <img src="/assets/img/003.png" alt="image01" width="320">
                </div>
            </div>

            <div class="da-slide">
                <h2>서비스 소개</h2>
                <h4>자세 모니터링</h4>
                <p>자세 모니터링 서비스는 당신의 자세를 실시간으로 모니터링하여<br>
                    건강하지 못한 자세를 오랜 시간 취할 경우, 알림을 통해 바른 자세로의<br>변화를 도와드립니다.</p>
                <a href="/redirect7" class="da-link button">이동하기</a>
                <div class="da-img">
                    <img src="/assets/img/004.png" width="320" alt="image02">
                </div>
            </div>

            <div class="da-slide">
                <h2>서비스 소개</h2>
                <h4>통계</h4>
                <p>해당 서비스는 사용자의 일상적인 자세를 추적하고 그 정보를<br>평균값과 그래프로 시각화하여 제공합니다.<br>
                    또한 자세 변경 빈도를 확인하고 거북목 습관을 개선할 수 있도록 도와줍니다.</p>
                <a href="/redirect8" class="da-link button">이동하기</a>
                <div class="da-img">
                    <img src="/assets/img/005.png" width="320" alt="image03">
                </div>
            </div>

            <div class="da-arrows">
                <span class="da-arrows-prev"></span>
                <span class="da-arrows-next"></span>
            </div>

        </div>
    </div>
</div>

<div class="section primary-section" id="service">
    <div class="container">
        <div class="title" style="margin-top: -30px">
            <h4>당신의 문화생활을 한 단계 업그레이드하는 문화행사 및 문화공간 안내 서비스</h4>

            <p>서울문화마당에 오신걸 환영합니다!</p>
        </div>

        <div class="row-fluid">
            <div class="container" style="margin-top: -40px">
                <div class="feature-grid">

                    <div class="feature" id="div1" onclick="location.href='/redirect6';"
                         style="position: relative; overflow: hidden; transition: transform 0.3s ease; cursor: pointer;">
<!--                        <img class="icon" src="/assets/img/icon1.png" style="position: absolute; width: 14%" alt="">-->
                        <h2 style="font-size: 22px; text-align: center; padding-top: 40px;">
                           <span style="background-color:#5da5bb; padding: 1px 2px;">문화행사 찾기</span>
                        </h2>
                        <p style="text-align: center; transition: transform 0.3s ease;">당신의 거북목 상태를 체크하세요.<br>
                            정도에 따른 등급을 확인할 수 있습니다.</p>
                        <br><br>
                    </div>
                    <div class="feature" id="div2" onclick="location.href='/redirect7';"
                         style="position: relative; overflow: hidden; transition: transform 0.3s ease; cursor: pointer;">
<!--                        <img class="icon" src="/assets/img/icon2.png" style="position: absolute; width: 14%" alt="">-->
                        <h2 style="font-size: 22px; text-align: center; padding-top: 40px; transition: transform 0.3s ease;">
                            <span style="background-color:#5da5bb; padding: 1px 2px;">문화시설 찾기</span>
                        </h2>
                        <p style="text-align: center; transition: transform 0.3s ease;">거북목 자세를 감지하면 즉시 알림을 보내<br>바른 자세를
                            유지할 수 있도록 도와줍니다.</p>
                    </div>
                    <div class="feature" id="div3" onclick="location.href='/redirect8';"
                         style="position: relative; overflow: hidden; transition: transform 0.3s ease; cursor: pointer;">
<!--                        <img class="icon" src="/assets/img/icon3.png" style="position: absolute; width: 14%" alt="">-->
                        <h2 style="font-size: 22px; text-align: center; padding-top: 40px; transition: transform 0.3s ease;">
                            <span style="background-color:#5da5bb; padding: 1px 2px;">커뮤니티</span></h2>
                        <p style="text-align: center; transition: transform 0.3s ease;">사용자의 자세와 데이터를 분석하여<br>개인 맞춤형
                            그래프를 제공합니다.</p>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<div class="section secondary-section " id="portfolio">
    <div class="triangle2"></div>
    <div class="container" style="margin-top: -20px">

        <div class="title">
            <h3>추천 영상</h3>
        </div>

<!--        <div class="title">-->
<!--            <h3>추천 영상</h3>-->
<!--        </div>-->

<!--        <ul class="nav nav-pills">-->
<!--            <li class="filter">-->
<!--                <a onclick="searchYouTube('거북목 운동')">거북목 운동</a>-->
<!--            </li>-->
<!--            <li class="filter">-->
<!--                <a onclick="searchYouTube('거북목 스트레칭')">거북목 스트레칭</a>-->
<!--            </li>-->
<!--            <li class="filter">-->
<!--                <a onclick="searchYouTube('거북목 교정')">거북목 교정</a>-->
<!--            </li>-->
<!--        </ul>-->
        <div id="single-project">
            <ul id="portfolio-grid" class="thumbnails row">
            </ul>
        </div>
    </div>
</div>

<script>
    document.getElementById('logoutLink').addEventListener('click', function (event) {
        event.preventDefault();
        fetch('/logout', {method: 'POST'})
            .then(response => {
                window.location.href = '/user/login';
            })
            .catch(error => {
                console.error('Logout failed:', error);
            });
    });
</script>
<script src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery.mixitup.js"></script>
<script type="text/javascript" src="js/bootstrap.js"></script>
<script type="text/javascript" src="js/modernizr.custom.js"></script>
<script type="text/javascript" src="js/jquery.bxslider.js"></script>
<script type="text/javascript" src="js/jquery.cslider.js"></script>
<script type="text/javascript" src="js/jquery.placeholder.js"></script>
<script type="text/javascript" src="js/jquery.inview.js"></script>
<script src="js/respond.min.js"></script>
<script type="text/javascript" src="js/app.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const defaultA = document.querySelector('.nav-pills .filter:first-child a');
        defaultA.style.backgroundColor = '#2b2b36';
        defaultA.style.color = 'white';

        const links = document.querySelectorAll('.nav-pills .filter a');
        links.forEach(function(link) {
            link.addEventListener('click', function(event) {
                links.forEach(function(l) {
                    l.style.backgroundColor = '';
                    l.style.color = '';
                });

                this.style.backgroundColor = '#2b2b36';
                this.style.color = 'white';
                event.preventDefault();
            });
        });
    });

</script>
<script>
    // YouTube API 키
    var API_KEYS = ['AIzaSyDA9LFxcFVZSeLSemP3PS_p8hZ4f6hyHjM', 'AIzaSyC7Z6CURRfB6TPRSKaE66Q1VKb31kCJXUc', 'AIzaSyCq16BL6KkZ07QvpJ9XEMA8coki2_mPMdA']; // API 키 배열
    var currentKeyIndex = 0; // 현재 사용 중인 키의 인덱스

    function searchYouTube(searchTerm) {
        var encodedSearchTerm = encodeURIComponent(searchTerm);
        var request = new XMLHttpRequest();
        var apiKey = API_KEYS[currentKeyIndex];
        request.open('GET', 'https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=3&q=' + encodedSearchTerm + '&type=video&key=' + apiKey, true);

        request.onload = function () {
            if (this.status == 200) {
                var data = JSON.parse(this.responseText);
                displayVideos(data.items);
            } else if (this.status == 403) { // 한도 초과 오류 감지
                currentKeyIndex = (currentKeyIndex + 1) % API_KEYS.length; // 다음 키로 전환
                if (currentKeyIndex !== 0) { // 첫 번째 키로 돌아오지 않았는지 확인
                    searchYouTube(searchTerm); // 재시도
                } else {
                    console.error('모든 API 키의 한도가 초과됨');
                }
            } else {
                console.error('API 요청 실패:', this.responseText);
            }
        };

        request.onerror = function () {
            console.error('네트워크 오류 발생');
        };
        request.send();
    }


    // 비디오 목록을 표시하는 함수
    function displayVideos(videos) {
        var container = document.getElementById('portfolio-grid');
        container.innerHTML = ''; // 컨테이너 초기화
        videos.forEach(function (video) {
            var listItem = document.createElement('li');
            listItem.className = 'span4 mix web';
            listItem.innerHTML = '<div class="thumbnail">' +
                '<iframe width="370" height="200" src="https://www.youtube.com/embed/' + video.id.videoId + '" frameborder="0" allowfullscreen></iframe>' +
                '<h3>' + video.snippet.title + '</h3>' + // 영상 제목 추가
                '</div>';
            container.appendChild(listItem);
        });
    }

    // 페이지 로드 시 기본 검색어로 유튜브 검색 실행
    window.onload = function () {
        searchYouTube('문화공간');
    };
</script>

</body>
</html>